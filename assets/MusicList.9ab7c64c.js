import{I as v,c as t,d as b,k as H,v as B,h as R,m as F,u as N,n as O,a as n,p as Z,i as k,S as u,f as V,r as I,e as G,M as j}from"./index.744f5d9e.js";const q=v("delete",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M9 10V44H39V10H9Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M20 20V33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 20V33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M4 10H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M16 10L19.289 4H28.7771L32 10H16Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),P=v("expand-down",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M6 10C6 7.79086 7.79086 6 10 6H38C40.2091 6 42 7.79086 42 10V38C42 40.2091 40.2091 42 38 42H10C7.79086 42 6 40.2091 6 38V10Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M6 32H42",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M20 16L24 20L28 16",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M6 26V38",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 26V38",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),_=v("expand-up",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M6 16H42",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M20 32L24 28L28 32",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M6 10V22",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 10V22",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),$=v("folder-download",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M5 8C5 6.89543 5.89543 6 7 6H19L24 12H41C42.1046 12 43 12.8954 43 14V40C43 41.1046 42.1046 42 41 42H7C5.89543 42 5 41.1046 5 40V8Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M30 28L23.9933 34L18 28.0134",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 20V34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),U=v("view-grid-card",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),J=v("view-grid-list",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 28L35 28",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 35H35",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 13L35 13",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 20L35 20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const K=b({name:"Toast",props:{show:Boolean,text:String},setup(e){return()=>t(R("transition"),{name:"mt-toast"},{default:()=>[H(t("div",{class:"mt-toast"},[t("div",{class:"mt-toast__text"},[e.text])]),[[B,e.show]])]})}});let x,y,g;function E({text:e,duration:s=2e3,appendTo:d=document.body}){const o=()=>{y.unmount(),d.removeChild(g)};x&&(clearTimeout(x),o()),y=F(K,{text:e,show:!0}),g=document.createElement("div"),d.appendChild(g),y.mount(g),x=setTimeout(()=>{o(),x=void 0},s)}const Q=b({name:"MusicItem",props:{musicItem:{type:Object,required:!0},currentTab:{type:Number}},emits:["click"],setup(e,{emit:s}){const d=N(),o=O(),f=n(()=>d.currentSong),C=n(()=>o.localMusics),h=n(()=>{var a,M;return e.musicItem.title===((a=f.value)==null?void 0:a.title)&&e.musicItem.artist===((M=f.value)==null?void 0:M.artist)}),r=n(()=>!!C.value.find(a=>a.title===e.musicItem.title&&a.artist===e.musicItem.artist)),c=()=>{o.addToLocal(e.musicItem),E({text:"\u5DF2\u6DFB\u52A0\u5230\u672C\u5730"})},L=()=>{o.removeFromLocal(e.musicItem),E({text:"\u79FB\u9664\u6210\u529F"})};return()=>t("div",{class:["music-item",h.value?"is-active":""],onClick:()=>s("click")},[t("div",{class:"music-inner"},[H(t("img",{class:"w-10 h-10",alt:e.musicItem.title},null),[[Z("lazy"),e.musicItem.cover]]),t("span",{class:"music-title ml-2.5 text-sm text-gray-800"},[e.musicItem.title]),t("span",{class:"music-artist mr-auto text-xs text-gray-500"},[t("i",{class:"mx-1.5"},[k("-")]),e.musicItem.artist]),u.ONLINE===e.currentTab&&!r.value&&t($,{class:"p-2",theme:"outline",size:"16",fill:"#333",onClick:V(c,["stop"])},null),u.LOCALE===e.currentTab&&t(q,{class:"p-2",theme:"outline",size:"16",fill:"#333",onClick:V(L,["stop"])},null)])])}}),Y=b({name:"MusicList",setup(){const e=N(),s=O(),d=n(()=>s.currentTab),o=n(()=>s.currentMode),f=n(()=>s.onlineMusics),C=n(()=>s.localMusics),h=I(!1),r=I(""),c=I(d.value),L=n(()=>c.value===u.ONLINE?f.value:C.value),a=n(()=>{const i=L.value.reduce((l,w)=>(l[w.artist]?l[w.artist]++:l[w.artist]=1,l),{});return Object.entries(i).sort((l,w)=>w[1]-l[1]).map(l=>({artist:l[0],count:l[1]}))}),M=n(()=>h.value?_:P),z=n(()=>r.value?L.value.filter(i=>i.artist===r.value):L.value),W=(i="")=>{r.value=i},A=()=>{h.value=!h.value},S=i=>{c.value=i,W()},T=i=>{s.setCurrentMode(i)},D=(i,m)=>{s.setCurrentTab(c.value),e.selectPlay({sequenceList:z.value,currentIndex:m})};return G(()=>{s.fetchMusics()}),()=>t("div",{class:"musiclist my-8"},[t("div",{class:"music-header mb-4"},[t("div",{class:"music-tabs"},[t("span",{class:{"is-active":c.value===u.LOCALE},onClick:()=>S(u.LOCALE)},[k("\u672C\u5730")]),t("span",{class:["ml-2.5",{"is-active":c.value===u.ONLINE}],onClick:()=>S(u.ONLINE)},[k("\u5728\u7EBF")])]),t("span",{class:"music-mode"},[o.value===j.CARD&&t(U,{theme:"outline",size:"24",fill:"#6b7280",onClick:()=>T(j.LIST)},null),o.value===j.LIST&&t(J,{theme:"outline",size:"24",fill:"#6b7280",onClick:()=>T(j.CARD)},null)])]),t("div",{class:"relative mb-5"},[t("div",{class:["music-singers",{"is-expand":h.value}]},[t("span",{class:["music-singer",{"is-active":r.value===""}],onClick:()=>W()},[k("\u5168\u90E8("),L.value.length,k(")")]),a.value.map((i,m)=>t("span",{class:["music-singer",{"is-active":r.value===i.artist}],key:m,onClick:()=>W(i.artist)},[i.artist,k("("),i.count,k(")")]))]),t("div",{class:"music-expand"},[t(M.value,{theme:"outline",size:"24",fill:"#6b7280",onClick:()=>A()},null)])]),t("div",{class:["music-list",{"mode-card":o.value===j.CARD}]},[z.value.map((i,m)=>t(Q,{key:i.title+i.artist,musicItem:i,currentTab:c.value,onClick:()=>D(i,m)},null))])])}});export{Y as default};
