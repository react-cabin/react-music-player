import{I as w,c as t,d as C,k as W,v as b,h as S,m as z,u as y,n as T,a as l,p as N,i as x,S as r,f as I,r as E,e as V,M as u}from"./index.44177b0e.js";const O=w("delete",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M9 10V44H39V10H9Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M20 20V33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M28 20V33",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M4 10H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M16 10L19.289 4H28.7771L32 10H16Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),A=w("folder-download",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M5 8C5 6.89543 5.89543 6 7 6H19L24 12H41C42.1046 12 43 12.8954 43 14V40C43 41.1046 42.1046 42 41 42H7C5.89543 42 5 41.1046 5 40V8Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M30 28L23.9933 34L18 28.0134",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 20V34",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),H=w("view-grid-card",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"27",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),D=w("view-grid-list",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"6",width:"36",height:"36",rx:"3",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"13",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("rect",{x:"13",y:"27",width:"8",height:"8",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 28L35 28",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 35H35",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 13L35 13",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M27 20L35 20",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const B=C({name:"Toast",props:{show:Boolean,text:String},setup(e){return()=>t(S("transition"),{name:"mt-toast"},{default:()=>[W(t("div",{class:"mt-toast"},[t("div",{class:"mt-toast__text"},[e.text])]),[[b,e.show]])]})}});let L,M,v;function g({text:e,duration:i=2e3,appendTo:a=document.body}){const o=()=>{M.unmount(),a.removeChild(v)};L&&(clearTimeout(L),o()),M=z(B,{text:e,show:!0}),v=document.createElement("div"),a.appendChild(v),M.mount(v),L=setTimeout(()=>{o(),L=void 0},i)}const R=C({name:"MusicItem",props:{musicItem:{type:Object,required:!0},currentTab:{type:Number}},emits:["click"],setup(e,{emit:i}){const a=y(),o=T(),k=l(()=>a.currentSong),j=l(()=>o.localMusics),n=l(()=>{var c,s;return e.musicItem.title===((c=k.value)==null?void 0:c.title)&&e.musicItem.artist===((s=k.value)==null?void 0:s.artist)}),d=l(()=>!!j.value.find(c=>c.title===e.musicItem.title&&c.artist===e.musicItem.artist)),h=()=>{o.addToLocal(e.musicItem),g({text:"\u5DF2\u6DFB\u52A0\u5230\u672C\u5730"})},m=()=>{o.removeFromLocal(e.musicItem),g({text:"\u79FB\u9664\u6210\u529F"})};return()=>t("div",{class:["music-item",n.value?"is-active":""],onClick:()=>i("click")},[t("div",{class:"music-inner"},[W(t("img",{class:"w-10 h-10",alt:e.musicItem.title},null),[[N("lazy"),e.musicItem.cover]]),t("span",{class:"music-title ml-2.5 text-sm text-gray-800"},[e.musicItem.title]),t("span",{class:"music-artist mr-auto text-xs text-gray-500"},[t("i",{class:"mx-1.5"},[x("-")]),e.musicItem.artist]),r.ONLINE===e.currentTab&&!d.value&&t(A,{class:"p-2",theme:"outline",size:"16",fill:"#333",onClick:I(h,["stop"])},null),r.LOCALE===e.currentTab&&t(O,{class:"p-2",theme:"outline",size:"16",fill:"#333",onClick:I(m,["stop"])},null)])])}}),G=C({name:"MusicList",setup(){const e=y(),i=T(),a=l(()=>i.currentTab),o=l(()=>i.currentMode),k=l(()=>i.onlineMusics),j=l(()=>i.localMusics),n=E(a.value),d=l(()=>n.value===r.ONLINE?k.value:j.value),h=s=>{n.value=s},m=s=>{i.setCurrentMode(s)},c=(s,f)=>{i.setCurrentTab(n.value),e.selectPlay({sequenceList:d.value,currentIndex:f})};return V(()=>{i.fetchMusics()}),()=>t("div",{class:"musiclist my-8"},[t("div",{class:"music-header mb-5"},[t("div",{class:"music-tabs"},[t("span",{class:{"is-active":n.value===r.LOCALE},onClick:()=>h(r.LOCALE)},[x("\u672C\u5730")]),t("span",{class:["ml-2.5",{"is-active":n.value===r.ONLINE}],onClick:()=>h(r.ONLINE)},[x("\u5728\u7EBF")])]),t("span",{class:"music-mode"},[o.value===u.CARD&&t(H,{theme:"outline",size:"24",fill:"#6b7280",onClick:()=>m(u.LIST)},null),o.value===u.LIST&&t(D,{theme:"outline",size:"24",fill:"#6b7280",onClick:()=>m(u.CARD)},null)])]),t("div",{class:["music-list",{"mode-card":o.value===u.CARD}]},[d.value.map((s,f)=>t(R,{musicItem:s,currentTab:n.value,onClick:()=>c(s,f)},null))])])}});export{G as default};
