import{I as h,c as t,r as j,u as E,a as c,w as H,P as R,g as D,o as G,b as I,d as $,e as F,f as w,h as K,i as T,j as _,k as Q,l as P,v as Y}from"./index.744f5d9e.js";const q=h("go-end",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M14 12L26 24L14 36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M34 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),J=h("go-start",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M34 36L22 24L34 12",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M14 12V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),p=h("pause-one",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ee=h("play",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M20 24V17.0718L26 20.5359L32 24L26 27.4641L20 30.9282V24Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),te=h("play-cycle",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M4 25C4 18.3502 9.39624 13 16 13H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M38 7L44 13L38 19",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M44 23C44 29.6498 38.6038 35 32 35H4",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M10 41L4 35L10 29",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),ne=h("play-once",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M43.8233 25.2305C43.7019 25.9889 43.5195 26.727 43.2814 27.4395C42.763 28.9914 41.9801 30.4222 40.9863 31.6785C38.4222 34.9201 34.454 37 30 37H16C9.39697 37 4 31.6785 4 25C4 18.3502 9.39624 13 16 13H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M38 7L44 13L38 19",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 19V31",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 19L21 22L19.5 23.5",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),oe=h("shuffle-one",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M40 33L44 37L40 41",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M40 7L44 11L40 15",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M44 11H37C29.8203 11 24 16.8203 24 24C24 31.1797 29.8203 37 37 37H44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M4 37H11C18.1797 37 24 31.1797 24 24C24 16.8203 18.1797 11 11 11H4",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),ie=h("volume-mute",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{opacity:"0.01",x:"30",y:"18",width:"13",height:"13",fill:e.colors[2]},null),t("mask",{id:e.id+"603476ab",maskUnits:"userSpaceOnUse",x:"30",y:"18",width:"13",height:"13",style:{maskType:"alpha"}},[t("rect",{x:"30",y:"18",width:"13",height:"13",fill:e.colors[2]},null)]),t("g",{mask:"url(#"+e.id+"603476ab)"},[t("path",{d:"M40.7348 20.2858L32.2495 28.7711",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M32.2496 20.2858L40.7349 28.7711",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)]),t("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),se=h("volume-notice",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M34.2359 41.1857C40.0836 37.6953 44 31.305 44 24C44 16.8085 40.2043 10.5035 34.507 6.97906",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),le=h("volume-small",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});function re(){const e=j(null),o=j(null),i=E(),s=c(()=>i.playing),n=c(()=>s.value?"playing":""),r=(d,f)=>{const a=getComputedStyle(d).transform,k=getComputedStyle(f).transform;d.style.transform=a==="none"?k:k.concat(a)};return H(s,d=>{d||r(e.value,o.value)}),{cdRef:e,cdCoverRef:o,cdClass:n}}function ae(){const e=E(),o=c(()=>e.playMode);return{currentMode:c(()=>{const n=o.value;return n===R.SEQUENCE?te:n===R.RANDOM?oe:ne}),changeMode:()=>{const n=(o.value+1)%3;e.changeMode(n)}}}var A;const M=typeof window<"u",ce=e=>typeof e=="string",z=()=>{};M&&((A=window==null?void 0:window.navigator)==null?void 0:A.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ue(e){return D()?(G(e),!0):!1}function de(e){var o;const i=I(e);return(o=i==null?void 0:i.$el)!=null?o:i}const he=M?window:void 0;M&&window.document;M&&window.navigator;M&&window.location;function Z(...e){let o,i,s,n;if(ce(e[0])?([i,s,n]=e,o=he):[o,i,s,n]=e,!o)return z;let r=z;const d=H(()=>de(o),a=>{r(),a&&(a.addEventListener(i,s,n),r=()=>{a.removeEventListener(i,s,n),r=z})},{immediate:!0,flush:"post"}),f=()=>{d(),r()};return ue(f),f}const V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},S="__vueuse_ssr_handlers__";V[S]=V[S]||{};V[S];var U;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(U||(U={}));const X=$({name:"ProgressBar",props:{progress:Number,hasBtn:{type:Boolean,default:!0},barColor:String},emits:["progressChanging","progressChanged"],setup(e,{emit:o}){const s=j(0),n=j(null),r=j(null),d=c(()=>({width:`${s.value}px`,backgroundColor:e.barColor})),f=c(()=>({transform:`translate3d(${s.value}px,0,0)`}));H(()=>e.progress,l=>{if(!n.value)return;const g=n.value.clientWidth-(e.hasBtn?16:0);s.value=g*l}),F(()=>{if(!n.value)return;const l=n.value.clientWidth-(e.hasBtn?16:0);s.value=l*e.progress});const a={x1:0,beginWidth:0};let k=!1;const x=l=>{!r.value||(k=!0,a.x1=l instanceof TouchEvent?l.touches[0].pageX:l.pageX,a.beginWidth=r.value.clientWidth)},b=l=>{if(!k||!n.value)return;const g=(l instanceof TouchEvent?l.touches[0].pageX:l.pageX)-a.x1,y=a.beginWidth+g,L=n.value.clientWidth-(e.hasBtn?16:0),m=Math.min(1,Math.max(y/L,0));s.value=L*m,o("progressChanging",m)},C=()=>{if(!k||!n.value||!r.value)return;k=!1;const l=n.value.clientWidth-(e.hasBtn?16:0),g=r.value.clientWidth/l;o("progressChanged",g)},B=l=>{if(!n.value)return;const g=n.value.getBoundingClientRect(),y=l.pageX-g.left,L=n.value.clientWidth-(e.hasBtn?16:0),m=Math.min(1,Math.max(y/L,0));o("progressChanged",m)};return Z(document,"mouseup",C),Z(document,"touchend",C),()=>t("div",{ref:n,class:"progress-bar",onClick:B},[t("div",{class:"bar-inner"},[t("div",{ref:r,class:"progress",style:d.value},null),t("div",{class:"progress-btn-wrapper",style:f.value,onMousedown:w(x,["prevent"]),onMousemove:w(b,["prevent"]),onMouseup:w(C,["prevent"]),onTouchstart:w(x,["prevent"]),onTouchmove:w(b,["prevent"]),onTouchend:w(C,["prevent"]),onClick:w(()=>{},["stop"])},[t("div",{class:"progress-btn",style:{backgroundColor:e.barColor}},null)])])])}}),ge=$({name:"Player",setup(){const e=E(),o=c(()=>e.playing),i=c(()=>e.currentSong),s=c(()=>e.currentTime),n=c(()=>e.volume),{currentMode:r,changeMode:d}=ae(),{cdRef:f,cdCoverRef:a,cdClass:k}=re(),x=c(()=>o.value?p:ee),b=c(()=>{var v,W;const u=(W=(v=i.value)==null?void 0:v.duration)!=null?W:0;return s.value/u}),C=c(()=>n.value===0?ie:n.value<.3?le:se),B=()=>{e.setPlaying(!o.value)},l=()=>P.emit("prev"),g=()=>P.emit("next"),y=u=>{e.setProgressChanging(!0),e.setCurrentTime(i.value.duration*u)},L=u=>{e.setProgressChanging(!1);const v=i.value.duration*u;e.setCurrentTime(v),P.emit("changeTime",v),o.value||e.setPlaying(!0)},m=u=>{e.setVolume(u),P.emit("changeVolume",u)};return()=>{var u,v,W,N,O;return t("div",{class:"mt-8 sm:mt-28"},[t("h1",{class:"player-title"},[t(K("router-link"),{to:"/musics"},{default:()=>[T("\u6211\u7684\u79C1\u4EBA\u97F3\u4E50\u574A >")]})]),t("div",{class:"flex items-center mt-6 flex-col-reverse sm:flex-row"},[t("div",{class:"flex-1 w-full"},[t("div",{class:"flex items-center h-9 mt-6 justify-center sm:mt-0 sm:justify-start"},[t("span",{class:"text-xl text-gray-800 text"},[(u=i.value)==null?void 0:u.title]),t("span",{class:"text-sm text-gray-600 ml-1"},[t("i",{class:"mx-1.5.5.5.5.5"},[T("-")]),T(" "),(v=i.value)==null?void 0:v.artist])]),t("div",{class:"flex items-center mt-8"},[t("span",{class:"music-time mr-1.5"},[_(s.value)]),t(X,{class:"flex-1",progress:b.value,onProgressChanging:y,onProgressChanged:L},null),t("span",{class:"music-time ml-1.5"},[_((W=i.value)==null?void 0:W.duration)])]),t("div",{class:"player-control flex items-center justify-between mt-10"},[t(r.value,{class:"cursor-pointer",theme:"outline",size:"28","stroke-width":3,fill:"#4b5563",onClick:d},null),t("span",{class:"inline-flex items-center"},[t(J,{class:"cursor-pointer",theme:"outline",size:"32",fill:"#4b5563","stroke-width":3,onClick:l},null),t(x.value,{class:"cursor-pointer ml-5",theme:"outline",size:"40",fill:"#4b5563","stroke-width":3,onClick:B},null),t(q,{class:"cursor-pointer ml-5",theme:"outline",size:"32",fill:"#4b5563","stroke-width":3,onClick:g},null)]),t("div",{class:"inline-flex items-center "},[t(C.value,{theme:"outline",size:"16",fill:"#4b5563"},null),t("div",{class:"w-16 ml-1.5"},[t(X,{progress:n.value,onProgressChanging:m,onProgressChanged:m},null)])])])]),t("div",{class:"w-[180px] h-[180px] sm:ml-5"},[Q(t("div",{ref:f},[t("img",{ref:a,class:"w-full h-full rounded-full "+k.value,src:(N=i.value)==null?void 0:N.cover,alt:(O=i.value)==null?void 0:O.title},null)]),[[Y,"currentSong"]])])])])}}});export{ge as default};
